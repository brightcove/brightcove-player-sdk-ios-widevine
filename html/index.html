<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>BCOVWidevine Reference</title>

	<link rel="stylesheet" href="css/style.css">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1.4">
	<meta name="generator" content="appledoc 2.2.1 (build 1333)">
</head>
<body class="appledoc">
	<header>
		<div class="container" class="hide-in-xcode">
			
			<h1 id="library-title">
				<a href="index.html">BCOVWidevine </a>
			</h1>

			<p id="developer-home">
				<a href="index.html">Brightcove</a>
			</p>
			
		</div>
	</header>

	<aside>
		<div class="container">
			<nav>
				<ul id="header-buttons" role="toolbar">
					<li><a href="hierarchy.html">Hierarchy</a></li>
				</ul>
			</nav>
		</div>
	</aside>

	<article>
		<div id="overview-contents" class="container">
			<div id="content">
				<main role="main">
					<h1 class="title">BCOVWidevine Reference</h1>

					
					<div class="section section-overview index-overview">
						
						
						<h1>Widevine Plugin for Brightcove Player SDK for iOS, version 1.2.2.285</h1>

<h1>Requirements</h1>

<p>This plugin will run on iOS 7.0+. Widevine will not run on the simulator.</p>

<h1>Installation</h1>

<p>You can use <a href="http://cocoapods.org">Cocoapods</a> to add the Widevine Plugin for Brightcove Player SDK to your project.  You can find the latest <code>Brightcove-Player-SDK-Widevine</code> podspec <a href="https://github.com/brightcove/BCOVSpecs/tree/master/Brightcove-Player-SDK-Widevine">here</a>.  To use this spec, using Cocoapods 0.34.1+, add the following to the top of Podfile: <code>source '</code>https://github.com/brightcove/BCOVSpecs.git'<code></code>.</p>

<p>To add the Widevine Plugin for Brightcove Player SDK to your project manually:</p>

<ol>
<li>Install the latest version of the <a href="https://github.com/brightcove/brightcove-player-sdk-ios">Brightcove Player SDK</a>.</li>
<li>Download the latest zip'ed release of the plugin from our <a href="https://github.com/brightcove/brightcove-player-sdk-ios-widevine/releases">release page</a>.</li>
<li>Add the contents of Library and Headers to the project.</li>
<li>On the &ldquo;Build Phases&rdquo; tab of your application target, add the following to the &ldquo;Link
 Binary With Libraries&rdquo; phase:

<ul>
<li><code>libBCOVWidevine.a</code></li>
<li><code>libWViPhoneAPI.a</code></li>
<li><code>libc++</code></li>
<li><code>libxml2</code></li>
<li><code>libresolv</code></li>
<li><code>libSystem</code></li>
<li><code>libz</code></li>
</ul>
</li>
<li>On the &ldquo;Build Settings&rdquo; tab of your application target:

<ul>
<li>Ensure that BCOVWidevine headers are in your application&rsquo;s &ldquo;Header Search Path&rdquo;.</li>
<li>Ensure that <code>-ObjC</code> has been added to the &ldquo;Other Linker Flags&rdquo; build setting.</li>
</ul>
</li>
</ol>


<h1>Quick Start</h1>

<pre><code>
        NSString *token;      // (Brightcove Media API token with URL access)
        NSString *playlistID; // (ID of the playlist you wish to use)

        BCOVPlayerSDKManager *manager = [BCOVPlayerSDKManager sharedManager];
    [1] id&lt;BCOVPlaybackController&gt; controller = [playbackManager createWidevinePlaybackControllerWithViewStrategy:nil]viewStrategy:nil];
        [self.view addSubview:controller.view];

        BCOVCatalogService *catalog = [[BCOVCatalogService alloc] initWithToken:token];
    [2] [catalog findWidevinePlaylistWithPlaylistID:playlistID
                                 parameters:nil
                                 completion:^(BCOVPlaylist *playlist,
                                              NSDictionary *jsonResponse,
                                              NSError      *error) {

                                     [controller setVideos:playlist];
                                     [controller play];

                                 }];
</code></pre>

<p>Let&rsquo;s break this code down into steps, to make it a bit simpler to digest:</p>

<ol>
<li>BCOVWidevine adds some category methods to BCOVPlaybackManager. The first of these is <code>-createWidevinePlaybackControllerWithViewStrategy</code>. Use this method to create your playback controller. Alternatively (if you are using more than one session provider), you can create a <a href="Classes/BCOVWidevineSessionProvider.html">BCOVWidevineSessionProvider</a> and pass that to the manager method that creates a playback controller with upstream session providers.*</li>
<li>BCOVWidevine adds some category methods to BCOVPlaybackManager for retrieving Widevine renditions from the catalog.</li>
</ol>


<p>* Note that BCOVWidevineSessionProvider should come before any ad session providers in the chain passed to the manager when constructing the playback controller.</p>

<p>If you have questions or need help, we have a support forum for Brightcove&rsquo;s native Player SDKs at <a href="https://groups.google.com/forum/">https://groups.google.com/forum/</a>#!forum/brightcove-native-player-sdks .</p>

<h1>Customizing Plugin Behavior</h1>

<p>You can customize default plugin behavior by creating an instance of <a href="Classes/BCOVWidevineSessionProviderOptions.html"><code>BCOVWidevineSessionProviderOptions</code></a> and overriding the default properties. To use a <code>BCOVWideSessionProviderOptions</code> options instance, you need to create the <code>BCOVWideSessionProvider</code> using <code>[BCOVSDKManager createWidevineSessionProviderWithOptions:]</code>.</p>

<pre><code>
    BCOVWidevineSessionProviderOptions *options = [[BCOVWidevineSessionProviderOptions alloc] init];
    options.widevineSettings = @{ WVPlayerDrivenAdaptationKey: @0 };
    id&lt;BCOVPlaybackSessionProvider&gt; sessionProvider = [playbackManager createWidevineSessionProviderWithOptions:options];

    id&lt;BCOVPlaybackController&gt; playbackController = [playbackManager createPlaybackControllerWithSessionProvider:sessionProvider viewStrategy:nil];
</code></pre>

<h1>Widevine Quirks</h1>

<h3>Multiple Widevine Videos/Players</h3>

<p>The Widevine library can only load a single video into memory at a time. Therefore, when using the BCOVWidevine plugin, there can be only one <code>BCOVPlaybackController</code> using the plugin at a given time. The default behavior of preloading of the next video in a playlist is also disabled for this reason.</p>

<h3>Background/Foreground behavior</h3>

<p>Widevine will automatically stop and unload WVM videos when the client app is exited. This occurs on <code>UIApplicationDidEnterBackgroundNotification</code>. When re-entering the app (on <code>UIApplicationWillEnterForegroundNotification</code>, assuming iOS has not purged the app from memory), the BCOVWidevine plugin will replace the current BCOVPlaybackSession&rsquo;s <code>player.currentItem</code> with a new AVPlayerItem, and will automatically seek to the position recorded when the app entered the background. This takes additional time, as the video must be reloaded &ldquo;from scratch&rdquo;. When the new AVPlayerItem is ready, the plugin will send a <code>kBCOVWidevineLifeycleEventSessionResumed</code> lifecycle event to indicate that the AVPlayer can receive message sends. Failing to wait for this event before interacting with the player will result in undefined behavior.</p>

<p>In addition to re-initializing the player, the plugin will also resume playback if the content had been playing when the app exited. This can be disabled with a custom <code>BCOVWideSessionProviderOptions</code>.</p>
						
						
					</div>
					

					<div class="index-container">
						

						
						<div class="index-column">
							<h2 class="index-title">Class References</h2>
							<ul>
								
								<li><a href="Classes/BCOVWidevineSessionProvider.html">BCOVWidevineSessionProvider</a></li>
								
								<li><a href="Classes/BCOVWidevineSessionProviderOptions.html">BCOVWidevineSessionProviderOptions</a></li>
								
							</ul>
						</div>
						

						
						<div class="index-column">
							

							

							
							<h2 class="index-title">Category References</h2>
							<ul>
								
								<li><a href="Categories/BCOVCatalogService+BCOVWidevineAdditions.html">BCOVCatalogService(BCOVWidevineAdditions)</a></li>
								
								<li><a href="Categories/BCOVCatalogService+BCOVWidevineImperativeCallbacks.html">BCOVCatalogService(BCOVWidevineImperativeCallbacks)</a></li>
								
								<li><a href="Categories/BCOVPlayerSDKManager+BCOVWidevineAdditions.html">BCOVPlayerSDKManager(BCOVWidevineAdditions)</a></li>
								
							</ul>
							
						</div>
						
					</div>

					<footer>
						<div class="footer-copyright">
							
							<p class="copyright">Copyright &copy; 2015 Brightcove. All rights reserved. Updated: 2015-08-19</p>
							
							
							<p class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.2.1 (build 1333)</a>.</p>
							
						</div>
					</footer>
				</main>
			</div>
		</div>
	</article>

	<script src="js/script.js"></script>
</body>
</html>