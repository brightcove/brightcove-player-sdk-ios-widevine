<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>BCOVWidevine Reference</title>

	<link rel="stylesheet" href="css/style.css">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1.4">
	<meta name="generator" content="appledoc 2.2.1 (build 1334)">
</head>
<body class="appledoc">
	<header>
		<div class="container" class="hide-in-xcode">
			
			<h1 id="library-title">
				<a href="index.html">BCOVWidevine </a>
			</h1>

			<p id="developer-home">
				<a href="index.html">Brightcove</a>
			</p>
			
		</div>
	</header>

	<aside>
		<div class="container">
			<nav>
				<ul id="header-buttons" role="toolbar">
					<li><a href="hierarchy.html">Hierarchy</a></li>
				</ul>
			</nav>
		</div>
	</aside>

	<article>
		<div id="overview-contents" class="container">
			<div id="content">
				<main role="main">
					<h1 class="title">BCOVWidevine Reference</h1>

					
					<div class="section section-overview index-overview">
						
						
						<h1>Widevine Plugin for Brightcove Player SDK for iOS, version 2.1.4.358</h1>

<h1>Supported Platforms</h1>

<p>iOS 8.0 and 9.0. <strong>Widevine will not run on the iOS Simulator.</strong></p>

<h1>Important - Please Note</h1>

<p>The Widevine Plugin for Brightcove Player SDK for iOS is <strong>deprecated</strong>.</p>

<h1>Installation</h1>

<p>The Widevine Plugin for Brightcove Player SDK provides a static library framework for installation.</p>

<h2>CocoaPods</h2>

<p>You can use <a href="http://cocoapods.org">Cocoapods</a> to add the Widevine Plugin for Brightcove Player SDK to your project. You can find the latest <code>Brightcove-Player-SDK-Widevine</code> podspec <a href="https://github.com/brightcove/BCOVSpecs/tree/master/Brightcove-Player-SDK-Widevine">here</a>. To use this spec, add the following to the top of Podfile:<code>source '</code>https://github.com/brightcove/BCOVSpecs.git'<code></code> or run <code>pod repo add BCOVSpecs </code>https://github.com/brightcove/BCOVSpecs.git<code></code>. CocoaPods 0.39 or newer is required.</p>

<p>The Widevine SDK <strong>is not</strong> included in this pod. You <strong>must</strong> manually add the Widevine library to your project even when using Cocoapods. The pod will however add all the libraries required by Widevine library such as <code>libc++</code>, <code>libxml2</code>, <code>libresolv</code>, <code>libSystem</code>, and <code>libz</code>. <strong>Please contact Brightcove Support to get access to the Widevine library .</strong></p>

<p>To manually install the Widevine library:</p>

<ol>
<li>Request the Widevine library from Brightcove support.</li>
<li>Add the contents of the package to your project.</li>
<li>On the &ldquo;Build Phases&rdquo; tab of your application target, add the following to the &ldquo;Link
 Binary With Libraries&rdquo; phase:

<ul>
<li><code>libWViPhoneAPI.a</code></li>
</ul>
</li>
<li>On the &ldquo;Build Settings&rdquo; tab of your application target:

<ul>
<li>Ensure that Widevine headers are in your application&rsquo;s &ldquo;Header Search Path&rdquo;.</li>
<li>Ensure that <code>-ObjC</code> has been added to the &ldquo;Other Linker Flags&rdquo; build setting.</li>
</ul>
</li>
</ol>


<p>Static Framework example:</p>

<pre><code>source 'https://github.com/CocoaPods/Specs.git'
source 'https://github.com/brightcove/BCOVSpecs.git'

pod 'Brightcove-Player-SDK-Widevine'
</code></pre>

<h2>Manual</h2>

<p>To add the Widevine Plugin for Brightcove Player SDK to your project manually:</p>

<ol>
<li>Install the latest version of the <a href="https://github.com/brightcove/brightcove-player-sdk-ios">Brightcove Player SDK</a>.</li>
<li>Download the latest zip'ed release of the plugin from our <a href="https://github.com/brightcove/brightcove-player-sdk-ios-widevine/releases">release page</a>.</li>
<li>Request Widevine library from Brightcove support and add it your project.</li>
<li>Add the &lsquo;BrightcoveWidevine.framework&rsquo; to your project.</li>
<li>On the &ldquo;Build Settings&rdquo; tab of your application target, ensure that the &ldquo;Framework Search Paths&rdquo; include the path to the framework. This should have been done automatically unless the framework is stored under a different root directory than your project.</li>
<li>On the &ldquo;Build Phases&rdquo; tab of your application target, add the following to the &ldquo;Link
 Binary With Libraries&rdquo; phase:

<ul>
<li><code>BrightcoveWidevine.framework</code></li>
<li><code>libWViPhoneAPI.a</code></li>
<li><code>libc++</code></li>
<li><code>libxml2</code></li>
<li><code>libresolv</code></li>
<li><code>libSystem</code></li>
<li><code>libz</code></li>
</ul>
</li>
<li>On the &ldquo;Build Settings&rdquo; tab of your application target:

<ul>
<li>Ensure that <code>-ObjC</code> has been added to the &ldquo;Other Linker Flags&rdquo; build setting.</li>
<li>Ensure that Widevine headers are in your application&rsquo;s &ldquo;Header Search Path&rdquo;.</li>
</ul>
</li>
</ol>


<h1>Quick Start</h1>

<pre><code>
        NSString *token;      // (Brightcove Media API token with URL access)
        NSString *playlistID; // (ID of the playlist you wish to use)

        BCOVPlayerSDKManager *manager = [BCOVPlayerSDKManager sharedManager];
    [1] id&lt;BCOVPlaybackController&gt; controller = [playbackManager createWidevinePlaybackControllerWithViewStrategy:nil]viewStrategy:nil];
        [self.view addSubview:controller.view];

        BCOVCatalogService *catalog = [[BCOVCatalogService alloc] initWithToken:token];
    [2] [catalog findWidevinePlaylistWithPlaylistID:playlistID
                                 parameters:nil
                                 completion:^(BCOVPlaylist *playlist,
                                              NSDictionary *jsonResponse,
                                              NSError      *error) {

                                     [controller setVideos:playlist];
                                     [controller play];

                                 }];
</code></pre>

<p>Let&rsquo;s break this code down into steps, to make it a bit simpler to digest:</p>

<ol>
<li>BCOVWidevine adds some category methods to BCOVPlaybackManager. The first of these is <code>-createWidevinePlaybackControllerWithViewStrategy</code>. Use this method to create your playback controller. Alternatively (if you are using more than one session provider), you can create a <a href="Classes/BCOVWidevineSessionProvider.html">BCOVWidevineSessionProvider</a> and pass that to the manager method that creates a playback controller with upstream session providers.*</li>
<li>BCOVWidevine adds some category methods to BCOVPlaybackManager for retrieving Widevine renditions from the catalog.</li>
</ol>


<p>* Note that BCOVWidevineSessionProvider should come before any ad session providers in the chain passed to the manager when constructing the playback controller.</p>

<p>If you have questions or need help, we have a support forum for Brightcove&rsquo;s native Player SDKs at <a href="https://groups.google.com/forum/">https://groups.google.com/forum/</a>#!forum/brightcove-native-player-sdks .</p>

<h1>Customizing Plugin Behavior</h1>

<p>You can customize default plugin behavior by creating an instance of <a href="Classes/BCOVWidevineSessionProviderOptions.html"><code>BCOVWidevineSessionProviderOptions</code></a> and overriding the default properties. To use a <code>BCOVWideSessionProviderOptions</code> options instance, you need to create the <code>BCOVWideSessionProvider</code> using <code>[BCOVSDKManager createWidevineSessionProviderWithOptions:]</code>.</p>

<pre><code>
    BCOVWidevineSessionProviderOptions *options = [[BCOVWidevineSessionProviderOptions alloc] init];
    options.widevineSettings = @{ WVPlayerDrivenAdaptationKey: @0 };
    id&lt;BCOVPlaybackSessionProvider&gt; sessionProvider = [playbackManager createWidevineSessionProviderWithOptions:options];

    id&lt;BCOVPlaybackController&gt; playbackController = [playbackManager createPlaybackControllerWithSessionProvider:sessionProvider viewStrategy:nil];
</code></pre>

<h2>Source Selection (WVM, HTTP/HTTPs)</h2>

<p>The Brightcove Player SDK for iOS provides clients the ability to attach multiple url and delivery types (<code>BCOVSource</code>) to a single video (<code>BCOVVideo</code>). For example, if your videos are being retrieved by the catalog or playback service, there may be a mix of WVM, HLS, or MP4 renditions for a single video, along with HTTP and HTTPs versions.  Which one of these sources that get selected is determined by a source selection block. The default source selection policy used by the Widevine plugin selects the first Widevine <code>BCOVSource</code> on each <code>BCOVVideo</code>, regardless of scheme.</p>

<p>Source selection can be overridden by creating a <a href="Classes/BCOVWidevineSessionProviderOptions.html"><code>BCOVWidevineSessionProviderOptions</code></a> and using it to create a <a href="Classes/BCOVWidevineSessionProvider.html"><code>BCOVWidevineSessionProvider</code></a>. For example:</p>

<pre><code>BCOVPlayerSDKManager *sdkManager = [BCOVPlayerSDKManager sharedManager];

BCOVWidevineSessionProviderOptions *options = [[BCOVWidevineSessionProviderOptions alloc] init];    
options.sourceSelectionPolicy = &lt;policy&gt;

id&lt;BCOVWidevineSessionProvider&gt; provider = [sdkManager createWidevineSessionProviderWithOptions:options];
id&lt;BCOVPlaybackController&gt; playbackController [sdkManager createPlaybackControllerWithSessionProvider:provider viewStrategy:nil];
</code></pre>

<p>If this default selection policy does not work for you, there are a few alternatives to selecting a source:</p>

<ul>
<li><p>If retrieving videos from Video Cloud via the catalog service or playback service, before calling <code>[BCOVPlaybackController setVideos:]</code>, use the update method on the <code>BCOVVideo</code> to only contain the source you want (see the &ldquo;Values&rdquo; section for more info).</p></li>
<li><p>If you prefer HTTPS sources, the Widevine plugin provides additional options for selecting Widevine sources with a particular scheme. <code>[BCOVWidevineSourceSelectionPolicy sourceSelectionWidevineWithScheme:kBCOVSourceURLSchemeHTTPS]</code> provides a source selection policy that prefers Widevine sources using HTTPS. This will not convert non-HTTP urls to HTTPs urls. If you choose to select HTTPs, ensure that your CDN is configured for HTTPs. If the CDN is configured for HTTPs, use <code>BCOVPlaybackService</code> instead of <code>BCOVCatalogService</code> to retrieve video/playlist metadata.</p></li>
<li><p>Similar to updating the video object, you may also implement your own source selection block.</p>

<pre><code>  options.sourceSelectionPolicy = ^ BCOVSource *(BCOVVideo *video) {

     &lt;Check video.sources for source&gt;
</code></pre></li>
</ul>

						
						
					</div>
					

					<div class="index-container">
						

						
						<div class="index-column">
							<h2 class="index-title">Class References</h2>
							<ul>
								
								<li><a href="Classes/BCOVWidevineSessionProvider.html">BCOVWidevineSessionProvider</a></li>
								
								<li><a href="Classes/BCOVWidevineSessionProviderOptions.html">BCOVWidevineSessionProviderOptions</a></li>
								
								<li><a href="Classes/BCOVWidevineSourceSelectionPolicy.html">BCOVWidevineSourceSelectionPolicy</a></li>
								
							</ul>
						</div>
						

						
						<div class="index-column">
							

							

							
							<h2 class="index-title">Category References</h2>
							<ul>
								
								<li><a href="Categories/BCOVCatalogService+BCOVWidevineAdditions.html">BCOVCatalogService(BCOVWidevineAdditions)</a></li>
								
								<li><a href="Categories/BCOVCatalogService+BCOVWidevineImperativeCallbacks.html">BCOVCatalogService(BCOVWidevineImperativeCallbacks)</a></li>
								
								<li><a href="Categories/BCOVPlayerSDKManager+BCOVWidevineAdditions.html">BCOVPlayerSDKManager(BCOVWidevineAdditions)</a></li>
								
							</ul>
							
						</div>
						
					</div>

					<footer>
						<div class="footer-copyright">
							
							<p class="copyright">Copyright &copy; 2017 Brightcove. All rights reserved. Updated: 2017-01-26</p>
							
							
							<p class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.2.1 (build 1334)</a>.</p>
							
						</div>
					</footer>
				</main>
			</div>
		</div>
	</article>

	<script src="js/script.js"></script>
</body>
</html>